utdatum=$(who -b | awk '{print $3}'); uttijd=$(who -b | awk '{print $4}'); rhvers=$(cat /etc/redhat-release);bhvers=$(cat/etc/bluehat-release);swpus=$(sar -S|tail -2|head -1|awk '{print $4}');funcdesc=$(cat /.function);frpar=$(echo -ht);ut=$(uptime | awk '{print $3" "$4}');rhvers=$(cat /etc/redhat-release);bhvers=$(cat /etc/bluehat-release);funcdesc=$(cat /.function);socketstotal=$(lscpu | grep -i "socket(s)" | awk '{ print $2 }');corespsocket=$(lscpu | grep -i "core(s)" | awk '{ print $4 }');threadspcore=$(lscpu | grep -i "thread(s)" | awk '{ print $4}');corethreadstotal=$(($corespsocket*$threadspcore));threadsallcores=$(($socketstotal*$corethreadstotal)); swaptotal=$(free -ht | grep "Swap:" | awk '{ print $2 }');defswp=$(lvs | grep -i swap | grep -ic "wi-ao");clear;echo ; echo;date ; echo ;echo $funcdesc ;  echo Server $HOSTNAME uptime is since $utdatum on $uttijd. OS details: ; echo $bhvers -  $rhvers; echo It has $socketstotal CPU socket[s] in use and per socket $corespsocket core[s], $(($corespsocket*$threadspcore)) thread[s] with $threadsallcores threads overall; echo ; echo =======[ Memory ]=======; free $frpar ;echo; echo ;echo =======[ Swap info ]=======;lvs | grep -i swap | grep "wi-ao"; echo ; swapon -s; echo; echo Swapfile utilization is $swpus % on a total of $swaptotal allocated swapspace, with $defswp default swapfile[s].; echo ;echo; echo =======[ Volume Groups ]======= ; vgs ; echo; echo; echo =======[ Top 15 memory users in percentage ]======= ;echo; echo RSZ [KB]  = ook wel rss, is het huidige memorygebruik; echo VSZ [KiB] = bij intiele executie beschikbaar geheugen; echo;echo mem use: g,mmm,kkk  [g=Gb, m=Mb, k=Kb];echo ;echo RSZ___VSZ____PID____STARTED__USER__TIME_COMMAND;ps -e -o rsz,vsz,pid,start,time,user,args | grep -v "RSZ    VSZ    PID  STARTED     TIME USER     COMMAND" | grep -v "    0      0" | sort -n -r | head -n 15; echo ; echo; echo; echo =======[ Top 15 CPU users in percentage ]=======;socketstotal=$(lscpu | grep -i "socket(s)" | awk '{ print $2 }');corespsocket=$(lscpu | grep -i "core(s)" | awk '{ print $4 }');threadspcore=$(lscpu | grep -i "thread(s)" | awk '{ print $4}');corethreadstotal=$(($corespsocket*$threadspcore));threadsallcores=$(($socketstotal*$corethreadstotal));echo;echo This system has $socketstotal CPU socket[s] in use and per socket $corespsocket core[s], $(($corespsocket*$threadspcore)) thread[s] with $threadsallcores threads overall.;echo;echo;echo %CPU__PID___USER_____COMMAND;ps -eo pcpu,pid,user,args | grep -v "%CPU    PID USER     COMMAND" | sort -n -r | head -n 15;echo;echo; echo; echo; echo "=============[ Komt de swap nummering hieronder [in fstab] overeen met swap nummering hierboven?... ]=============";echo;lvs | grep -i swap ; echo; echo Mist een swap de o dan in fstab toevoegen en swap -a;echo Voorbeeld -wi-a-----  deze mist de o en is niet actief;echo; grep -i swap /etc/fstab ; echo; echo ==================================================== ; echo
